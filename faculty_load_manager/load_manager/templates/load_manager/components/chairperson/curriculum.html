{% extends 'load_manager/container/container.html' %}
{% load staticfiles %}

{% block extra_css %}
<!-- SELECT2 -->
<link rel="stylesheet" href="{% static "vendor/DataTables/datatables.min.css" %}">
<link href="{% static "vendor/select2/css/select2.min.css" %}" rel="stylesheet" />
<!-- DATATABLES-->
{% endblock %}
{% block content %}
{% include "_modal.html" %}
<div class="card animated fadeInDown settings-card">
  <div class="card-header">
    <h5>Curriculum</h5> <button type="button" id="curriculum-upload" class="btn btn-success btn-outline-success"
      name="button">Upload Curriculum</button>

  </div>
  <div class="card-content">
    <div class="container-fluid">
      <div class="row">
        <select class="form-control" id="curriculum-select" name="curriculum" style="width:150px;">
          {% for curriculum in curriculums %}
          <option value="{{ curriculum.pk }}">{{ curriculum }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="row p-3">
        <div class="col">
          <div class="table-responsive">
            <table id="curriculum-table" class="table table-bordered table-hover" width="100%" cellspacing="0"
              role="grid" aria-describedby="dataTable_info">
              <thead>
                <tr role="row" class="text-center">
                  <th style="width:10%">Curriculum</th>
                  <th style="width:10%">Description</th>
                  <th>Details</th>
                  <th style="width:10%">Status</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock content %}

{% block extra_js %}
<!-- SELECT2 -->
<script src="{% static "vendor/select2/js/select2.min.js" %}"></script>
<script type="text/javascript" src="{% static "vendor/DataTables/datatables.min.js" %}"></script>
<script type="text/javascript">

  $(document).ready(function () {
    $("#curriculum-upload").modalForm({
      formURL: "{% url 'settings-curriculum-upload' %}"
    });
    $('#curriculum-select').select2({
      // maximumSelectionLength: 3,
    });
    $('#curriculum-select').on('select2:select', function (e) {
      alert('wow');
    });

    var tables = '/' + $('#curriculum-select').val() + '/subjects/';
    $('#curriculum-table').DataTable({
      "ajax": {
        "processing": true,
        "dataSrc": '',
        "url": '/settings/curriculum/1/subjects/',
      },
      "columnDefs": [
        { "className": 'col-subject' }
      ]
    })
  });


</script>

{% endblock %}